<div class="main_row layuot_mod_1" ng-cloak>
  <h1 class="content_headline">Edit Personal Profile</h1>
  <div class="content_block">
    <div class="add_info_block title_mod">
      <div class="add_info_header">
        <div class="add_info_title">Email</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>{{user.email}}</p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_email">Enter email</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" id="Enter_email" placeholder="Enter email" class="f_c_field default_mod "  ng-model="user.email" readOnly=true />
              </dd>
            </dl>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save" ng-click="userSubmit(user)"><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block password_mod">
      <div class="add_info_header">
        <div class="add_info_title">Password</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_password">Enter password</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="password" ng-model="user.password" id="Enter_password" placeholder="Enter password" class="f_c_field default_mod "/>
              </dd>
            </dl>
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_password_conformation">Enter password conformation</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="password" ng-model="user.password_confirmation" id="Enter_password_conformation" placeholder="Confirm  your  password " class="f_c_field default_mod "/>
              </dd>
            </dl>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save"  ng-click="userSubmit(user)"><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block category_mod">
      <div class="add_info_header">
        <div class="add_info_title">Language</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <label for="Enter_Language">Enter Language</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <select ng-model="ln" id="Enter_Language" data-placeholder="Enter Language" multiple="multiple" class="f_c_field default_mod select_add_category normal_list"
                  ng-options="language.name for language in languages track by language.code">
                </select>
              </dd>
            </dl>
            <div class="category_block"></div>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save" ng-click="userSubmit(user)"><%= I18n.t('save')  %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">Location</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>{{location(user.address_attributes.street1,user.address_attributes.street2,user.address_attributes.city, user.address_attributes.state, user.address_attributes.country,store.address_attributes.postal_code)}}</p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <div class="form_block hor_mod">
              <dl class="form_cell form_cell_v1_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="Address">Address</label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <input type="text" id="Street1" placeholder="Address" ng-model="user.address_attributes.street1" class="f_c_field default_mod ">
                </dd>
              </dl>
               <dl class="form_cell form_cell_v1_mod">
           <dt class="form_c_hline form_v1_mod hline_hide_mod">
            <label for="Address">Street2</label>
           </dt>
           <dd class="form_c_f_w form_v1_mod hline_hide_mod">
            <input type="text" id="Street2" placeholder="Street2" class="f_c_field default_mod " ng-model="user.address_attributes.street2">
           </dd>
         </dl>

            </div>
            <div class="form_block hor_mod third_mod">
              <dl class="form_cell form_cell_v1_mod third_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="Country">Country</label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <ui-select ng-model="user.address_attributes.country" name="Country" theme="selectize">
                    <ui-select-match placeholder="Select a country">{{$select.selected.name}}</ui-select-match>
                    <ui-select-choices repeat="country.name as country in countries |  filter: $select.search">
                      <div ng-bind-html="country.name | highlight: $select.search"></div>
                    </ui-select-choices>
                  </ui-select>
                </dd>
              </dl>
              <dl class="form_cell form_cell_v1_mod third_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="State">State</label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <ui-select ng-model="user.address_attributes.state" ng-show="user.address_attributes.country=='United States'" name="State" theme="selectize" id="selectState" >
                    <ui-select-match placeholder="US state name">{{$select.selected.name}}</ui-select-match>
                    <ui-select-choices repeat="state.name as state in states |  filter: $select.search">
                      <div ng-bind-html="state.name | highlight: $select.search"></div>
                    </ui-select-choices>
                  </ui-select>
                  <input type="text" id="State" placeholder="State" class="f_c_field default_mod " ng-model="user.address_attributes.state"  ng-hide="user.address_attributes.country=='United States'" />
                </dd>
              </dl>
              <dl class="form_cell form_cell_v1_mod third_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="State">City</label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <input type="text" id="City" placeholder="City" class="f_c_field default_mod " ng-model="user.address_attributes.city"/>
                </dd>
              </dl>
            </div>
            <div class="form_block hor_mod">
            <dl class="form_cell form_cell_v1_mod">
           <dt class="form_c_hline form_v1_mod hline_hide_mod">
            <label for="Postalcode">Postalcode</label>
           </dt>
           <dd class="form_c_f_w form_v1_mod hline_hide_mod">
            <input type="text" id="Postalcode" placeholder="Postalcode" class="f_c_field default_mod " ng-model="user.address_attributes.postal_code">
           </dd>
         </dl>
        </div>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save" ng-click="userSubmit(user)"><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block title_mod">
      <div class="add_info_header">
        <div class="add_info_title">Time Zone</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_your_time_zone">Enter your time zone</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" id="Enter_your_time_zone" placeholder="Enter your time zone" class="f_c_field default_mod "/>
              </dd>
            </dl>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save"><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block title_mod">
      <div class="add_info_header">
        <div class="add_info_title">Telephone</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
             <p> {{user.mobile_number}} </p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod" >
                <label for="Enter_your_telephone_number">Enter your telephone number</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text"  ng-model="user.mobile_number" id="Enter_your_telephone_number" placeholder="Enter your telephone number" class="f_c_field default_mod " />
              </dd>

            </dl>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save" ng-click="userSubmit(user)" ><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block title_mod">
      <div class="add_info_header">
        <div class="add_info_title">SMS</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_SMS">Enter SMS</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" id="Enter_SMS" placeholder="Enter SMS" class="f_c_field default_mod "/>
              </dd>
            </dl>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save"><%= I18n.t('save')  %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block title_mod">
      <div class="add_info_header">
        <div class="add_info_title">Business Associations</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_number_of_businesses_and_users">Enter number of businesses and users</label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" id="Enter_number_of_businesses_and_users" placeholder="Enter number of businesses and users" class="f_c_field default_mod "/>
              </dd>
            </dl>
          </div>
          <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save"><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block radio_mod">
      <div class="add_info_header">
        <div class="add_info_title">Privacy Setting</div>
        <div class="add_info_colapse_butt"></div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block" style="display: none;">
          <div class="add_info_form_w">
            <ul class="options_b_value_list checkbox_big_list">
              <li class="options_b_value_l_item checkbox_big_list">
                <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                  <input name="privacy" type="radio" class="lbl_inp_rb_ch"><span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_white_mod">allow my profile to be seen by everyone</span>
                </label>
              </li>
              <li class="options_b_value_l_item checkbox_big_list">
                <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                  <input name="privacy" type="radio" class="lbl_inp_rb_ch"><span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_white_mod">allow my profile to be seen by invitation</span>
                </label>
              </li>
              <li class="options_b_value_l_item checkbox_big_list">
                <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                  <input name="privacy" type="radio" class="lbl_inp_rb_ch"><span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_white_mod">allow my profile to be seen only by my business/operation</span>
                </label>
              </li>
              <li class="options_b_value_l_item checkbox_big_list">
                <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                  <input name="privacy" type="radio" class="lbl_inp_rb_ch"><span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_white_mod">allow my profile to be invisible to all</span>
                </label>
              </li>
            </ul>
          </div>
            <div class="butt_wrap add_info_form_mod">
            <div class="butt_cancel"><%= I18n.t('cancel') %></div>
            <div class="butt_save"><%= I18n.t('save') %></div>
          </div>
        </div>
      </div>
    </div>
    <% if current_user.permission_list(current_user.company).include?("view_permission") %>
      <div class="add_info_block radio_mod">
        <div class="add_info_header">
          <div class="add_info_title" ><%=t('permission_settings') %></div>
          <div class="add_info_colapse_butt"></div>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <div class="form_block hor_mod">
              <dl class="form_cell form_cell_v1_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="User List">User List</label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <ui-select ng-model="selectedUserId" theme="selectize" id="selectUser" ng-change="getPermission($select.selected.id)" >
                    <ui-select-match  placeholder="Select User">{{ $select.selected.name }}</ui-select-match>
                    <ui-select-choices repeat="user in users |  filter: $select.search">
                      <div ng-bind-html="user.name | highlight: $select.search"   ></div>
                    </ui-select-choices>
                  </ui-select>
                </dd>
              </dl>
            </div>
          </div>
          <div class="add_info_content_block">
            <div class="add_info_form_block">
              <div class="add_info_form_w">
                <ul ng-repeat="permission in permissions" class="options_b_value_list checkbox_big_list">
                  <li class="options_b_value_l_item checkbox_big_list">
                    <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                      <input type="checkbox" class="lbl_inp_rb_ch" ng-model="permission.assigned"/>
                      <span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_white_mod">{{permission.label}}</span>
                    </label>
                  </li>
                </ul>
              </div>
              <div class="butt_wrap add_info_form_mod">
                <% if current_user.permission_list(current_user.company).include?("change_permission") %>
                  <div class="butt_cancel"><%= I18n.t('cancel') %></div>
                  <div class="butt_save" ng-click="changePermission()"><%= I18n.t('save') %></div>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
    <div class="add_info_footer"><a href="" class="wizard_add_butt"><%= I18n.t('save') %></a></div>
  </div>
</div>