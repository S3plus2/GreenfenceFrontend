<form name ="add_operation" novalidate>
  <div class="view_container">
    <h1 class="content_headline" ng-hide="store.id">Add an Operation</h1>
    <h1 class="content_headline" ng-show="store.id"><%=t('view_or_edit_an_Operation') %></h1>
    <div class="add_info_sub_header">
      <div class="wizards_save_draft_butt">Save Draft</div>
      <div class="wizards_delete_butt">Delete</div>
    </div>
    <div id='operation_img_crop' style="display: none">
      <div class="cropArea">
        <img-crop image="myImage" result-image="myCroppedImage">
        </img-crop>
      </div>
      <div>
        <div class="butt_save" ng-click="upload_operation_image()" style="margin: 0">
          Crop
        </div>
      </div>
    </div>
    <!-- block to add operation type -->
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">
          <font color="RED">
            *
          </font>
          <%= t('operation_type') %>
        </div>
        <div class="add_info_colapse_butt operation_box">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>
            {{store.operation_definition.operation_type}}
          </p>
        </div>
        <div class="add_info_form_block operation_box">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Operation_type">
                  Operation Type
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <ui-select ng-model="operation.operation_definition_id" theme="selectize" ng-change="getOperationTypeData({{$select.selected.id}})" ng-disabled="operation.id && store.operation_definition_id">
                  <ui-select-match placeholder="Select an operation type in the list or search its name...">
                    {{$select.selected.text}}
                  </ui-select-match>
                  <ui-select-choices repeat="operation_type.id as operation_type in operationTypes |  filter: $select.search">
                    <div ng-bind-html="operation_type.text | highlight: $select.search">
                    </div>
                  </ui-select-choices>
                </ui-select>
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
    <!-- End block --><!-- block for operation name -->
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">
          <font color="RED">
            *
          </font>
          Operation Name
        </div>
        <div class="add_info_colapse_butt">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>
            {{store.name}}
          </p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_operation_name">
                  Enter Operation Name
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" name="operation name" id="Enter_operation_name" placeholder="Enter Operation Name" class="f_c_field default_mod " ng-model="operation.name">
              </dd>
            </dl>
            <div class="category_wrap">
              <ul class="category_list">
                <li class="category_list_item">
                  <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                    <input name="Featured" type="checkbox" class="lbl_inp_rb_ch" ng-model="operation.featured"><span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_grey_mod ng-binding">Featured</span>
                  </label>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- end -->
    <div class="add_info_block upload_mod">
      <div class="add_info_header">
        <div class="add_info_title">
          Upload Operation Profile Picture
        </div>
        <div class="add_info_colapse_butt">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <a ng-if="store.operation.image.url && store.operation.image.url != '/assets/avatar.png'" href="{{store.operation.image.url}}" title="Click here to see file" class="file_link ng-scope" download>Download File</a>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Upload_image">
                  Upload Image
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="button" id="Upload_image" placeholder="Upload Image" class="f_c_field default_mod file_mod" ng-file-select ng-file-change="upload_image($files, $event)"/><span class="f_c_field_file_field"><span class="f_c_field_file_text">{{operation.image.filename || "Upload image"}}</span><span class="f_c_field_file_butt">Choose File</span></span>
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div>
    <!-- block for operation description -->
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">
          Description
        </div>
        <div class="add_info_colapse_butt">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>
            {{store.description}}
          </p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_operation_name">
                  Enter Description
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" id="Enter_operation_name" name="description" placeholder="Enter Description" class="f_c_field default_mod " ng-model="operation.description">
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div><!-- end --><!-- block for operation address -->
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">
          Location
        </div>
        <div class="add_info_colapse_butt">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>
            {{location(store.address_attributes.street1,store.address_attributes.street2, store.address_attributes.city, store.address_attributes.state, store.address_attributes.country,store.address_attributes.postal_code)}}
          </p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <div class="form_block hor_mod">
              <dl class="form_cell form_cell_v1_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="Address">
                    Address
                  </label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <input type="text" id="Address" placeholder="Street1" ng-model="operation.address_attributes.street1" class="f_c_field default_mod ">
                </dd>
              </dl>
              <dl class="form_cell form_cell_v1_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="Address">
                    Street2
                  </label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <input type="text" id="Street2" placeholder="Street2" class="f_c_field default_mod " ng-model="operation.address_attributes.street2">
                </dd>
              </dl>
            </div>
            <div class="form_block hor_mod third_mod">
              <dl class="form_cell form_cell_v1_mod third_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="Country">
                    Country
                  </label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <ui-select ng-model="operation.address_attributes.country" name="Country" theme="selectize">
                    <ui-select-match placeholder="Select a country">
                      {{$select.selected.name}}
                    </ui-select-match>
                    <ui-select-choices repeat="country.name as country in countries |  filter: $select.search">
                      <div ng-bind-html="country.name | highlight: $select.search">
                      </div>
                    </ui-select-choices>
                  </ui-select>
                </dd>
              </dl>
              <dl class="form_cell form_cell_v1_mod third_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="State">
                    State
                  </label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <ui-select ng-model="operation.address_attributes.state" ng-show="operation.address_attributes.country=='United States'" name="State" theme="selectize" id="selectState">
                    <ui-select-match placeholder="US state name">
                      {{$select.selected.name}}
                    </ui-select-match>
                    <ui-select-choices repeat="state.name as state in states |  filter: $select.search">
                      <div ng-bind-html="state.name | highlight: $select.search">
                      </div>
                    </ui-select-choices>
                  </ui-select>
                  <input type="text" id="State" placeholder="State" class="f_c_field default_mod " ng-model="operation.address_attributes.state" ng-hide="operation.address_attributes.country=='United States'" />
                </dd>
              </dl>
              <dl class="form_cell form_cell_v1_mod third_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="State">
                    City
                  </label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <input type="text" id="City" placeholder="City" class="f_c_field default_mod " ng-model="operation.address_attributes.city"/>
                </dd>
              </dl>
            </div>
            <div class="form_block hor_mod">
              <dl class="form_cell form_cell_v1_mod">
                <dt class="form_c_hline form_v1_mod hline_hide_mod">
                  <label for="Postalcode">
                    Postalcode
                  </label>
                </dt>
                <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                  <input type="text" id="Postalcode" placeholder="Postalcode" class="f_c_field default_mod " ng-model="operation.address_attributes.postal_code">
                </dd>
              </dl>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">
          Select Business type and related sub types for company
        </div>
        <div class="add_info_colapse_butt">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <label for="Enter_name_of_category">
                  Enter name of business type
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <select id="business_types" ng-model="operation.business_types" data-placeholder="Enter name of business type" multiple="multiple" class="f_c_field default_mod select_add_category normal_list_v2" ng-options="opt as opt.name for opt in business_types track by opt.id">
                </select>
              </dd>
            </dl>
            <dl class="form_cell form_cell_v1_mod select_add_product hidden_field" style="display: none">
              <dt class="form_c_hline form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <label for="Enter_name_of_category">
                  Enter name of business sub type
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod autocomplete_el_v1_mod">
                <select id="business_sub_types" ng-model="operation.business_sub_types" data-placeholder="Enter name of business sub type" multiple="multiple" class="f_c_field default_mod select_add_category normal_list_v2" ng-options="opt as opt.name group by opt.business_type_id for opt in business_sub_types track by opt.id | orderBy:'business_type_id'">
                </select>
              </dd>
            </dl>
            <div class="category_wrap">
              <div ng-repeat="business in selected_businesses_list">
                <h2 ng-if="business.value.length > 0" class="category_hline">{{business.name}}</h2>
                <ul ng-if="business.value.length > 0" class="category_list">
                  <li class="category_list_item" ng-repeat="sub_business in business.value">
                    <label class="lbl_rb_ch_block lbl_rb_ch_default_mod">
                      <input name="Example" type="checkbox" checked="true" class="lbl_inp_rb_ch" ng-click="deselect($event)"><span class="lbl_rb_ch_text lbl_rb_ch_t_default_mod lbl_rb_ch_t_default_green_grey_mod">{{sub_business.name}}</span>
                    </label>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="dynamic_content">
      <content-item ng-repeat="definition in definitions" data="definition">
      </content-item>
    </div>
    <!-- block for operation additional_information -->
    <div class="add_info_block">
      <div class="add_info_header">
        <div class="add_info_title">
          Additional Information
        </div>
        <div class="add_info_colapse_butt">
        </div>
      </div>
      <div class="add_info_content_block">
        <div class="add_info_content">
          <p>
            {{store.additional_information}}
          </p>
        </div>
        <div class="add_info_form_block">
          <div class="add_info_form_w">
            <dl class="form_cell form_cell_v1_mod">
              <dt class="form_c_hline form_v1_mod hline_hide_mod">
                <label for="Enter_additional_information">
                  Enter Addtional Information
                </label>
              </dt>
              <dd class="form_c_f_w form_v1_mod hline_hide_mod">
                <input type="text" id="Enter_additional_information" placeholder="Enter Addtional Information" class="f_c_field default_mod " ng-model="operation.additional_information">
              </dd>
            </dl>
          </div>
        </div>
      </div>
    </div><!-- end -->
    <div class="add_info_footer">
      <a class="wizard_add_butt" ng-click="createOperation(operation,add_operation)">Add</a>
    </div>

  </div>
  <br>
</form>
